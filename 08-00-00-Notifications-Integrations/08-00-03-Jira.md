# Integrating Jira with Energy Monitor

Energy Monitor allows for sending for notifications from hosts and services to your Jira server. 

In order to set it up the following must be done:

## Setting up 

<br>

1. in "**/opt/naemon/etc/naemon/resource.cfg**", insert 3 macros:

```
$USER103$=example@example.com
$USER104$=https://test123aa.atlassian.net/rest/api/2/issue
$USER105$=ATATT3xTOKEN2vYDtU7SxEbUkJNUFgQKm242zbSAS0cGk8VUjYvXbjNjJhFXOdBRQN_KbBubQa2pfo4LcaTCfoi0zyV2wBNDf5odlPuqvzVQUTZCNwrFAOICof-tFIsHhF39GAC3JMJvZliVULqT7GDP_z1cZ-H9A9lIoZRWUGQiaw=TOKEN 
```
2. Download an API security token from the following link:

```
https://id.atlassian.com/manage-profile/security/api-tokens
```

<blockquote style="border-left: 8px solid green; padding: 15px;"> <b>Note</b>: 
Based on project's avalability parameter in Jira, the issues, can be of different types, ie. Epik /Task, which is the earliest function. 
</blockquote>
<br>

3. in "**Manage**" -> "**Configure**" -> "**Contact**" 


### Host notifications

-   Under "**host_notification_cmds**" field choose:

    -   notify-host-by-jira   

-   Under "**host_notification_cmds_args**" field choose:

    -   $ProjectKey!$IssueType

for instance:

```
host_notification_cmds_args: `WSPAR!Bug
```

<blockquote style="border-left: 8px solid orange; padding: 15px;"> <b>Note</b>: 
Keep in mind that the Issue Type must be created and enabled in Your Jira project
</blockquote>

### Service notifications

-   Under "**service_notification_cmds**" field choose:

    -   notify-service-by-jira   

-   Under "**service_notification_cmds_args**" field choose:

    -   $ProjectKey!$IssueType

for instance:

```
service_notification_cmds_args: `WSPAR!Bug
```

![Integration_with_Jira](/media/08_00_00_11_Integration_with_Jira.png)

4. (Optional) Enable logging

Under:

    -   /opt/plugins/JiraNotificationHost.pl

and

    -   /opt/plugins/JiraNotificationService.pl












<blockquote style="border-left: 8px solid orange; padding: 15px;"> <b>Note</b>: 
All instructions below assume you are running Oracle Linux 8.X.
</blockquote>



1. Enter "**Manage**" -> "**Configure**" -> "**Authentication Modules**"




![Integration_with_Jira](/media/08_00_00_12_Integration_with_Jira.png)

![Integration_with_Jira](/media/08_00_00_13_Integration_with_Jira.png)



